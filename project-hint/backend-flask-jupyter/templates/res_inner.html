<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js">
    </script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V2ST7N3ZY3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-V2ST7N3ZY3');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5548835221228418"
        crossorigin="anonymous"></script>
    
    <!--    google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
    
    <style>
        .container-custom {
            max-width: 1400px;
            position: relative;
            justify-content: center;
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
        }
        .img-fluid-custom {
            max-width: 800px;
            height: auto;
        }
        .button-location {
            position: absolute;
/*             top: 10px; */
            left: -10px;
        }
        .chart3 {
            position: absolute;
            top: 45px;
            left: -20px;
                
        }   
        .js-plotly-plot .plotly .modebar {
            left: 60.2%;
/*             transform: translateX(-80%); */
        }
        
    </style>
</head>

<body>
    <div class="container-custom">

        <div class="button-location">
            <a href="{{ url_for('index_inner', stock_code=code) }}" class="btn btn-outline-success">재검색</a>
        </div>
<!--         <div class="row mb-3"> -->
<!--             <div class='col-md-4'> -->
<!--                 <h3>종목코드: {{code}}</h3> -->
<!--             </div> -->
        </div>
        <div style="position: relative; left: 600px; top: 30px;">
            <div class="row mb-3">
                <div class='col-md-4' style="color: #73879C;">
                    <h5><p>[기준일] {{startdate}} ~ {{enddate}}</p></h5>
                </div>
<!--             <div> -->
<!--                 <p class="text-left">유사도 <b>98%</b> 이상의 패턴 중 유사도가 가장 높은 추세입니다.</p> -->
<!--             </div> -->
            </div>
        </div>
        {% if noresult %}
        <div style="color: #73879C; position:relative; top:150px;text-align:center">
            <p><h2>죄송합니다.</h2></p>
            <p><h3>검색하신 기간에는 프랙탈을 찾을 수 없습니다.</h3></p>
            <p><h3>기간을 재설정하여 다시 검색해보세요.</h3></p>
        </div>
        {% else %}
<!--         <p class="text-left">유사도 <b>98%</b> 이상의 패턴 중 유사도가 가장 높은 추세입니다.</p> -->
<!--         <p class="text-left">유사도 <b>98%</b>이상 패턴 검색에 대한 결과입니다.</p> -->
<!--         <p class="text-left">총 <b>{{size}}</b>개의 유사 패턴이 검출 되었습니다.</p> -->
<!--         <ul class="text-left"> -->
<!--             <li class="text-left">최저 수익률은 <b>{{min}} %</b>의 수익률을 보였습니다.</li> -->
<!--             <li class="text-left">최고 수익률은 <b>{{max}} %</b>의 수익률을 보였습니다.</li> -->
<!--             <li class="text-left">평균 수익률은 <b>{{avg}} %</b>의 수익률을 보였습니다.</li> -->
<!--         </ul> -->
<!--         <p class="text-left">유사도가 가장 높았던 프랙탈의 추세입니다.</p> -->
        <div class="row">
            <div style="position: relative; top: 10px; left: 35px;">
<!--                 <img src="{{ url_for('plot_chart', code=code, startdate=startdate, enddate=enddate, period=period) }}"
                        class="img-fluid" alt="Responsive image" /> -->
                
                <div id='chart' class='chart'></div>
                
                <div style="position: relative; top: 10px; left: 5px;">
                    <ul>
                        <li class="text-left">기준 <span style="font-weight: 900; text-decoration:underline;"><mark>시작일</mark></span> 30일전부터 현재까지의 차트입니다.</li>
                    </ul>
                </div>
            </div>
            
            
            <div style="position: relative; top: 25px; left: 15px;">
                <img src="{{ url_for('plot_png', code=code, startdate=startdate, enddate=enddate, period=period) }}" class="img-fluid-custom"
                    alt="Responsive image" />
                <div>
                    <ul>
                        <li class="text-left">유사도 <span style="font-weight: 900; text-decoration:underline;"><mark>98%</mark></span>이상인 <span style="font-weight: 900; text-decoration:underline;"><mark>{{ size }}</mark></span>개의 과거 프랙탈중 입력하신 기간과 유사도가 가장 높은 프랙탈입니다.</li>
                        <li class="text-left"><span style="font-weight: 900; text-decoration:underline;"><mark>예측</mark></span>은 프랙탈의 향후 <span style="font-weight: 900; text-decoration:underline;"><mark>{{period}}일</mark></span>간의 결과를 나타냅니다.</li>
<!--                         <li class="text-left"><b>base</b>는 기준일의 주가 패턴을 나타냅니다</li> -->
<!--                         <li class="text-left"><b>prediction</b>은 기준일과 가장 유사한 패턴의 결과를 보여줍니다 (향후 <b>10일</b>간)</li> -->
                    </ul>
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</body>
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<script type='text/javascript'>
  var graphs = {{graphJSON | safe}};
  graphs.config = {
//       "displayModeBar": true,
      "displaylogo": false,
      'modeBarButtonsToRemove': [
          'toImage',
          'toggleSpikelines',
          'lasso2d'
      ],
  }
  
  Plotly.plot('chart',graphs, {});
</script>
</html>